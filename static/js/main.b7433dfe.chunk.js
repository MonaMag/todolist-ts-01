(this["webpackJsonpit-incubator-todolist-01"]=this["webpackJsonpit-incubator-todolist-01"]||[]).push([[0],{105:function(t,e,n){},111:function(t,e,n){},135:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),c=n(10),o=n.n(c);n(105),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,s,l=n(18),d=(n(111),n(179)),u=n(180),j=n(181),b=n(172),O=n(137),f=n(175),h=n(183),p=n(184),T=n(182),m=n(8),v=n(59),g=n(42),x=n.n(g),k=x.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"aa8b38a0-d891-47fb-a84d-9f4fa4fde0d7"}}),S=function(){return k.get("todo-lists")},I=function(t){return k.post("todo-lists",{title:t})},y=function(t){return k.delete("todo-lists/".concat(t))},D=function(t,e){return k.put("todo-lists/".concat(t),{title:e})},C=x.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"aa8b38a0-d891-47fb-a84d-9f4fa4fde0d7"}}),A=function(){return C.get("auth/me").then((function(t){return t.data}))},E=function(t){return C.post("auth/login",t)},w=function(){return C.delete("auth/login").then((function(t){return t.data})),C.delete("auth/login").then((function(t){return t.data}))},L=function(t,e){t.messages.length?e(U(t.messages[0])):e(U("Some error occurred")),e(N("failed"))},_=function(t,e){e(U(t.message?t.message:"Some error occurred")),e(N("failed"))},P={isAuth:!1},R=function(t){return{type:"login/SET_IS_AUTH",isAuth:t}},F={status:"idle",error:null,isAppInitialized:!1},U=function(t){return{type:"APP/SET-ERROR",error:t}},N=function(t){return{type:"APP/SET-STATUS",status:t}},K=function(t){return{type:"APP/SET-APP-INITIALIZED",isAppInitialized:t}},H="ADD_TODOLIST",M="REMOVE_TODOLIST",z="CHANGE_TODOLIST_TITLE",V="CHANGE_TODOLIST_FILTER",G="SET_TODOLIST",q="SET_TODOLIST_STATUS",B=[],W=n(36),J=x.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"aa8b38a0-d891-47fb-a84d-9f4fa4fde0d7"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(r||(r={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var Z=function(t){return J.get("todo-lists/".concat(t,"/tasks"))},$=function(t,e){return J.delete("todo-lists/".concat(t,"/tasks/").concat(e))},Q=function(t,e){return J.post("todo-lists/".concat(t,"/tasks"),{title:e})},X=function(t,e,n){return J.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},Y="REMOVE_TASK",tt="ADD_TASK",et="UPDATE_TASK",nt="ADD_TODOLIST",at="REMOVE_TODOLIST",it="SET_TODOLIST",ct="SET_TASKS",ot={},rt=function(t,e,n){return function(a,i){var c=i().tasks[e].find((function(e){return e.id===t}));if(c){var o=Object(m.a)({title:c.title,description:c.description,priority:c.priority,startDate:c.startDate,deadline:c.deadline,status:c.status},n);X(e,t,o).then((function(n){if(0===n.data.resultCode){var i=function(t,e,n){return{type:"UPDATE_TASK",taskId:t,model:e,todolistID:n}}(t,o,e);a(i)}else L(n.data,a)})).catch((function(t){_(t,a)}))}else console.warn("task not found in the state")}},st=n(176),lt=n(136),dt=n(45),ut=n(185),jt=n(173),bt=n(3),Ot=i.a.memo((function(t){var e=t.addItem,n=t.disabled,i=void 0!==n&&n;console.log("AddItemForm is called");var c=Object(a.useState)(null),o=Object(dt.a)(c,2),r=o[0],s=o[1],l=Object(a.useState)(""),d=Object(dt.a)(l,2),u=d[0],j=d[1],O=function(){var t=u.trim();t?(e(t),j("")):s("Title is required")};return Object(bt.jsxs)("div",{children:[Object(bt.jsx)(ut.a,{disabled:i,size:"small",value:u,onKeyPress:function(t){null!==r&&s(null),"Enter"===t.key&&O()},onChange:function(t){j(t.currentTarget.value)},error:!!r,label:"Title",variant:"outlined",helperText:r&&"Title is required"}),Object(bt.jsx)(b.a,{color:"primary",onClick:O,disabled:i,children:Object(bt.jsx)(jt.a,{})})]})})),ft=n(90),ht=i.a.memo((function(t){console.log("EditableSpan is called");var e=t.value,n=t.changeTitle,i=Object(a.useState)(e),c=Object(dt.a)(i,2),o=c[0],r=c[1],s=Object(a.useState)(!1),l=Object(dt.a)(s,2),d=l[0],u=l[1],j=Object(a.useCallback)((function(){u(!0),n(e)}),[n,e]),b=Object(a.useCallback)((function(){u(!1),n(o)}),[n,o]);return d?Object(bt.jsx)(ut.a,{onChange:function(t){r(t.currentTarget.value)},value:o,onBlur:b,onKeyPress:function(t){"Enter"===t.key&&b()},autoFocus:!0}):Object(bt.jsx)("span",{onDoubleClick:j,children:e})})),pt=n(174),Tt=n(187),mt=i.a.memo((function(t){var e=t.task,n=t.removeTask,i=t.changeTaskStatus,c=t.changeTaskTitle,o=t.todolistID,s=Object(a.useCallback)((function(){return n(e.id,o)}),[e.id,o,n]),l=Object(a.useCallback)((function(t){return i(e.id,t.currentTarget.checked?r.Completed:r.New,o)}),[e.id,o,i]),d=Object(a.useCallback)((function(t){c(e.id,t,o)}),[e.id,o,c]);return Object(bt.jsxs)("div",{className:e.status===r.Completed?"is-done":"",children:[Object(bt.jsx)(Tt.a,{checked:e.status===r.Completed,onChange:l,color:"primary"}),Object(bt.jsx)(ht,{changeTitle:d,value:e.title}),Object(bt.jsx)(b.a,{onClick:s,children:Object(bt.jsx)(pt.a,{})})]})})),vt=["demo"],gt=i.a.memo((function(t){var e=t.demo,n=void 0!==e&&e,i=Object(ft.a)(t,vt),c=Object(l.b)();Object(a.useEffect)((function(){var t;n||c((t=i.todolist.id,function(e){e(N("loading")),Z(t).then((function(n){e({type:"SET_TASKS",tasks:n.data.items,todolistID:t}),e(N("succeeded"))}))}))}),[]);var o=Object(a.useCallback)((function(){return i.deleteTodoList(i.todolist.id)}),[i.deleteTodoList,i.todolist.id]),s=Object(a.useCallback)((function(t){return i.changeTodolistTitle(i.todolist.id,t)}),[i.changeTodolistTitle,i.todolist.id]),d=Object(a.useCallback)((function(t){i.addTask(t,i.todolist.id)}),[i.addTask,i.todolist.id]),u=Object(a.useCallback)((function(){return i.changeFilter("all",i.todolist.id)}),[i.changeFilter,i.todolist.id]),j=Object(a.useCallback)((function(){return i.changeFilter("active",i.todolist.id)}),[i.changeFilter,i.todolist.id]),O=Object(a.useCallback)((function(){return i.changeFilter("completed",i.todolist.id)}),[i.changeFilter,i.todolist.id]),h=i.tasks;return"completed"===i.todolist.filter&&(h=i.tasks.filter((function(t){return t.status===r.Completed}))),"active"===i.todolist.filter&&(h=i.tasks.filter((function(t){return t.status===r.New}))),Object(bt.jsx)("div",{children:Object(bt.jsxs)("div",{children:[Object(bt.jsxs)("h3",{children:[Object(bt.jsx)(ht,{value:i.todolist.title,changeTitle:s}),Object(bt.jsx)(b.a,{onClick:o,disabled:"loading"===i.todolist.entityStatus,children:Object(bt.jsx)(pt.a,{})})]}),Object(bt.jsx)(Ot,{addItem:d,disabled:"loading"===i.todolist.entityStatus}),Object(bt.jsx)("ul",{style:{listStyle:"none",paddingLeft:"0"},children:h.map((function(t){return Object(bt.jsx)(mt,{task:t,removeTask:i.removeTask,todolistID:i.todolist.id,changeTaskStatus:i.changeTaskStatus,changeTaskTitle:i.changeTaskTitle},t.id)}))}),Object(bt.jsxs)("div",{children:[Object(bt.jsx)(f.a,{style:{marginLeft:"3px"},color:"primary",variant:"all"===i.todolist.filter?"contained":"outlined",onClick:u,children:"All"}),Object(bt.jsx)(f.a,{style:{marginLeft:"3px"},color:"primary",variant:"active"===i.todolist.filter?"contained":"outlined",onClick:j,children:"Active"}),Object(bt.jsx)(f.a,{style:{marginLeft:"3px"},color:"primary",variant:"completed"===i.todolist.filter?"contained":"outlined",onClick:O,children:"Completed"})]})]})})})),xt=n(14),kt=function(t){var e=t.demo,n=void 0!==e&&e;console.log("Todolists R");var i=Object(l.b)(),c=Object(l.c)((function(t){return t.todolists})),o=Object(l.c)((function(t){return t.tasks})),r=Object(l.c)((function(t){return t.auth.isAuth}));Object(a.useEffect)((function(){if(!n&&r){var t=function(t){t(N("loading")),S().then((function(e){t({type:"SET_TODOLIST",todolists:e.data}),t(N("succeeded"))})).catch((function(e){_(e,t)}))};i(t)}}),[]);var s=Object(a.useCallback)((function(t,e){var n=function(t,e){return function(n){n(N("loading")),Q(e,t).then((function(t){if(0===t.data.resultCode){var e={type:"ADD_TASK",task:t.data.data.item};n(e),n(N("succeeded"))}else L(t.data,n)})).catch((function(t){_(t,n)}))}}(t,e);i(n)}),[i]),d=Object(a.useCallback)((function(t,e){var n=function(t,e){return function(n){$(t,e).then((function(a){var i=function(t,e){return{type:"REMOVE_TASK",taskID:t,todolistID:e}}(e,t);n(i)}))}}(e,t);i(n)}),[i]),u=Object(a.useCallback)((function(t,e,n){var a=rt(t,n,{status:e});i(a)}),[i]),j=Object(a.useCallback)((function(t,e,n){var a=rt(t,n,{title:e});i(a)}),[i]),b=Object(a.useCallback)((function(t){var e=function(t){return function(e){e(N("loading")),I(t).then((function(t){var n={type:"ADD_TODOLIST",todolist:t.data.data.item};e(n),e(N("succeeded"))}))}}(t);i(e)}),[i]),O=Object(a.useCallback)((function(t){var e=function(t){return function(e){e(N("loading")),e(function(t,e){return{type:"SET_TODOLIST_STATUS",status:"loading",todolistID:t}}(t)),y(t).then((function(n){var a=function(t){return{type:"REMOVE_TODOLIST",todolistID:t}}(t);e(a),e(N("succeeded"))}))}}(t);i(e)}),[i]),f=Object(a.useCallback)((function(t,e){var n,a,c=(n=t,a=e,function(t){D(n,a).then((function(e){var i=function(t,e){return{type:"CHANGE_TODOLIST_TITLE",newTitle:e,todolistID:t}}(n,a);t(i)}))});i(c)}),[i]),h=Object(a.useCallback)((function(t,e){var n=function(t,e){return{type:"CHANGE_TODOLIST_FILTER",filter:e,todolistID:t}}(e,t);i(n)}),[i]);return r?Object(bt.jsxs)(bt.Fragment,{children:[Object(bt.jsx)(st.a,{container:!0,style:{padding:"20px 0"},children:Object(bt.jsx)(Ot,{addItem:b})}),Object(bt.jsx)(st.a,{container:!0,spacing:3,style:{justifyContent:"space-evenly"},children:c.map((function(t){return Object(bt.jsx)(st.a,{item:!0,children:Object(bt.jsx)(lt.a,{elevation:20,style:{padding:"15px"},children:Object(bt.jsx)(gt,{todolist:t,tasks:o[t.id],deleteTodoList:O,addTask:s,changeTaskTitle:j,changeTaskStatus:u,removeTask:d,changeFilter:h,changeTodolistTitle:f,demo:n})})},t.id)}))})]}):Object(bt.jsx)(xt.a,{to:"/login"})},St=n(189),It=n(186);function yt(t){return Object(bt.jsx)(It.a,Object(m.a)({elevation:6,variant:"filled"},t))}function Dt(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),n=function(t,n){"clickaway"!==n&&e(U(null))};return Object(bt.jsx)(St.a,{open:!!t,autoHideDuration:6e3,onClose:n,children:Object(bt.jsx)(yt,{onClose:n,severity:"error",children:t})})}var Ct=n(190),At=n(171),Et=n(177),wt=n(178),Lt=n(89),_t=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isAuth})),n=Object(Lt.a)({validate:function(t){return t.email?t.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){var n;t((n=e,function(t){t(N("loading")),E(n).then((function(e){0===e.data.resultCode?(t(R(!0)),t(N("succeeded"))):L(e.data,t)})).catch((function(e){_(e,t)}))}))}});return e?Object(bt.jsx)(xt.a,{to:"/"}):Object(bt.jsx)(st.a,{container:!0,justify:"center",children:Object(bt.jsx)(st.a,{item:!0,xs:4,children:Object(bt.jsx)("form",{onSubmit:n.handleSubmit,children:Object(bt.jsxs)(Ct.a,{children:[Object(bt.jsxs)(At.a,{children:[Object(bt.jsxs)("p",{children:["To log in get registered",Object(bt.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(bt.jsx)("p",{children:"or use common test account credentials:"}),Object(bt.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(bt.jsx)("p",{children:"Password: free"})]}),Object(bt.jsxs)(Et.a,{children:[Object(bt.jsx)(ut.a,Object(m.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.errors.email?Object(bt.jsx)("div",{children:n.errors.email}):null,Object(bt.jsx)(ut.a,Object(m.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.errors.password?Object(bt.jsx)("div",{children:n.errors.password}):null,Object(bt.jsx)(wt.a,{label:"Remember me",control:Object(bt.jsx)(Tt.a,Object(m.a)(Object(m.a)({},n.getFieldProps("rememberMe")),{},{checked:n.values.rememberMe}))}),Object(bt.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},Pt=function(t){var e=t.demo,n=void 0!==e&&e;console.log("AppWithUserState is called"),console.log("CHECK");var i=Object(l.b)(),c=Object(l.c)((function(t){return t.app.status})),o=Object(l.c)((function(t){return t.app.isAppInitialized})),r=Object(l.c)((function(t){return t.auth.isAuth}));Object(a.useEffect)((function(){i((function(t){t(N("loading")),A().then((function(e){0===e.resultCode?(t(R(!0)),t(K(!0)),t(N("succeeded"))):(L(e,t),t(K(!0)))})).catch((function(e){_(e,t)}))}))}),[i]);var s=Object(a.useCallback)((function(){i((function(t){t(N("loading")),w().then((function(e){0===e.resultCode?(t(R(!1)),t(N("succeeded"))):L(e,t)})).catch((function(e){_(e,t)}))}))}),[i]);return o?Object(bt.jsxs)("div",{className:"App",children:[Object(bt.jsx)(Dt,{}),Object(bt.jsx)(u.a,{position:"static",children:Object(bt.jsxs)(j.a,{style:{justifyContent:"space-between"},children:[Object(bt.jsx)(b.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(bt.jsx)(T.a,{})}),Object(bt.jsx)(O.a,{variant:"h6",children:"TodoLists"}),r?Object(bt.jsx)(f.a,{color:"inherit",onClick:function(){return s()},children:"Log out"}):Object(bt.jsx)("span",{children:"\ud83d\udd0d"})]})}),"loading"===c&&Object(bt.jsx)(h.a,{}),Object(bt.jsx)(p.a,{fixed:!0,children:Object(bt.jsxs)(xt.d,{children:[Object(bt.jsx)(xt.b,{exact:!0,path:"/",render:function(){return Object(bt.jsx)(kt,{demo:n})}}),Object(bt.jsx)(xt.b,{path:"/login",render:function(){return Object(bt.jsx)(_t,{})}}),Object(bt.jsx)(xt.b,{path:"/404",render:function(){return Object(bt.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(bt.jsx)(xt.a,{from:"*",to:"/404"})]})})]}):Object(bt.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%"},children:Object(bt.jsx)(d.a,{style:{width:"100px"}})})},Rt=n(60),Ft=n(88),Ut=Object(Rt.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case tt:return Object(m.a)(Object(m.a)({},t),{},Object(W.a)({},e.task.todoListId,[e.task].concat(Object(v.a)(t[e.task.todoListId]))));case Y:return Object(m.a)(Object(m.a)({},t),{},Object(W.a)({},e.todolistID,t[e.todolistID].filter((function(t){return t.id!==e.taskID}))));case et:return Object(m.a)(Object(m.a)({},t),{},Object(W.a)({},e.todolistID,t[e.todolistID].map((function(t){return t.id===e.taskId?Object(m.a)(Object(m.a)({},t),e.model):t}))));case nt:return Object(m.a)(Object(m.a)({},t),{},Object(W.a)({},e.todolist.id,[]));case at:var n=Object(m.a)({},t);return delete n[e.todolistID],n;case it:var a=Object(m.a)({},t);return e.todolists.forEach((function(t){a[t.id]=[]})),a;case ct:return Object(m.a)(Object(m.a)({},t),{},Object(W.a)({},e.todolistID,e.tasks));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case H:return[Object(m.a)(Object(m.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(v.a)(t));case M:return t.filter((function(t){return t.id!==e.todolistID}));case z:return t.map((function(t){return t.id===e.todolistID?Object(m.a)(Object(m.a)({},t),{},{title:e.newTitle}):t}));case q:return t.map((function(t){return t.id===e.todolistID?Object(m.a)(Object(m.a)({},t),{},{entityStatus:e.status}):t}));case V:return t.map((function(t){return t.id===e.todolistID?Object(m.a)(Object(m.a)({},t),{},{filter:e.filter}):t}));case G:return e.todolists.map((function(t){return Object(m.a)(Object(m.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(m.a)(Object(m.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(m.a)(Object(m.a)({},t),{},{error:e.error});case"APP/SET-APP-INITIALIZED":return Object(m.a)(Object(m.a)({},t),{},{isAppInitialized:e.isAppInitialized});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET_IS_AUTH":return Object(m.a)(Object(m.a)({},t),{},{isAuth:e.isAuth});default:return t}}}),Nt=Object(Rt.c)(Ut,Object(Rt.a)(Ft.a));window.store=Nt;var Kt=n(47);o.a.render(Object(bt.jsx)(l.a,{store:Nt,children:Object(bt.jsx)(Kt.a,{children:Object(bt.jsx)(Pt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[135,1,2]]]);
//# sourceMappingURL=main.b7433dfe.chunk.js.map